import{f as i}from"./index-Co7v2xsC.js";import{h as n}from"./api-error-handler-CV6pRVHb.js";async function d(o,t,e,a){const r=new FormData;r.append("file",o),r.append("is_private","1"),r.append("folder","Home"),t&&r.append("doctype",t),e&&r.append("docname",e),a&&r.append("fieldname",a);const s=await i("/api/method/upload_file",{method:"POST",body:r});if(!s.ok){const p=await s.json();throw new Error(n(p,"Failed to upload file"))}return(await s.json()).message}async function f(o){const t=await i("/api/method/frappe.client.insert",{method:"POST",body:JSON.stringify({doc:{doctype:"Data Import",...o}})});if(!t.ok){const e=await t.json();throw new Error(n(e,"Failed to create data import"))}return(await t.json()).message}async function l(o){const t=await i("/api/method/frappe.core.doctype.data_import.data_import.form_start_import",{method:"POST",body:JSON.stringify({data_import:o})});if(!t.ok){const e=await t.json();throw new Error(n(e,"Failed to start data import"))}return(await t.json()).message}async function w(o){const t=await i(`/api/method/frappe.core.doctype.data_import.data_import.get_import_status?data_import_name=${o}`);if(!t.ok){const e=await t.json();let a="Failed to get import status";if(e.message)a=e.message;else if(e.exception){const r=e.exception.indexOf(":");a=r!==-1?e.exception.substring(r+1).trim():e.exception}throw new Error(a)}return(await t.json()).message}async function g(o){const t=await i(`/api/method/frappe.core.doctype.data_import.data_import.get_preview_from_template?data_import=${o}`);if(!t.ok){const e=await t.json();let a="Failed to get import preview";if(e.message)a=e.message;else if(e.exception){const r=e.exception.indexOf(":");a=r!==-1?e.exception.substring(r+1).trim():e.exception}throw new Error(a)}return(await t.json()).message}async function u(o){const t=await i(`/api/method/frappe.core.doctype.data_import.data_import.get_import_logs?data_import=${o}`);if(!t.ok){const e=await t.json();let a="Failed to get import logs";if(e.message)a=e.message;else if(e.exception){const r=e.exception.indexOf(":");a=r!==-1?e.exception.substring(r+1).trim():e.exception}throw new Error(a)}return(await t.json()).message}async function _(o,t){const e=await i("/api/method/frappe.client.set_value",{method:"POST",body:JSON.stringify({doctype:"Data Import",name:o,fieldname:t})});if(!e.ok){const a=await e.json();throw new Error(n(a,"Failed to update data import"))}return(await e.json()).message}async function y(o){const t=await i(`/api/method/company.company.frontend_api.get_doc_fields?doctype=${o}`);if(!t.ok){const e=await t.json();let a=`Failed to fetch ${o} fields`;if(e.message)a=e.message;else if(e.exception){const r=e.exception.indexOf(":");a=r!==-1?e.exception.substring(r+1).trim():e.exception}throw new Error(a)}return(await t.json()).message}function h(o){return`/api/method/company.company.frontend_api.download_import_template?doctype=${o}`}async function x(o,t){return(await(await i("/api/method/company.company.frontend_api.update_import_file",{method:"POST",body:JSON.stringify({data_import_name:o,data:JSON.stringify(t)}),credentials:"include"})).json()).message}export{h as a,g as b,f as c,_ as d,x as e,w as f,y as g,u as h,l as s,d as u};

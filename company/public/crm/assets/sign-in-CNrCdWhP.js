import{W as I,i as k,r as s,X as C,Y as F,j as e,w as L,B as i,T as p,L as x,v as P,I as A,p as E}from"./index-Co7v2xsC.js";import{C as z}from"./config-global-BX9xwJzv.js";import{S as D}from"./Snackbar-BVA3LOhi.js";import{A as T}from"./AlertTitle-BbqQne_Q.js";import{T as h}from"./TextField-BmVWmDzd.js";import{I as B}from"./Select-B1EkSlUY.js";import"./useFormControl-Cqn8lfES.js";function O(){const l=I(),{setUser:c}=k(),[n,g]=s.useState(""),[r,b]=s.useState(""),[a,f]=s.useState(!1),[j,d]=s.useState(null),[w,u]=s.useState(!1),[y,o]=s.useState(!1),S=s.useCallback(async()=>{d(null),o(!1),u(!0);try{await C(n,r);const t=await F();c(t),l.push("/")}catch{d("Invalid email or password"),o(!0)}finally{u(!1)}},[n,r,l,c]),m=()=>{o(!1)},v=e.jsxs(i,{component:"form",onSubmit:t=>{t.preventDefault(),S()},sx:{display:"flex",alignItems:"flex-end",flexDirection:"column"},children:[e.jsx(h,{fullWidth:!0,name:"email",label:"Email address",value:n,onChange:t=>g(t.target.value),sx:{mb:3},slotProps:{inputLabel:{shrink:!0}}}),e.jsx(x,{variant:"body2",color:"inherit",sx:{mb:1.5},children:"Forgot password?"}),e.jsx(h,{fullWidth:!0,name:"password",label:"Password",type:a?"text":"password",value:r,onChange:t=>b(t.target.value),slotProps:{inputLabel:{shrink:!0},input:{endAdornment:e.jsx(B,{position:"end",children:e.jsx(P,{onClick:()=>f(!a),edge:"end",children:e.jsx(A,{icon:a?"solar:eye-bold":"solar:eye-closed-bold"})})})}},sx:{mb:3}}),e.jsx(E,{fullWidth:!0,size:"large",color:"inherit",variant:"contained",loading:w,type:"submit",children:"Sign in"})]});return e.jsxs(e.Fragment,{children:[e.jsx(D,{open:y,autoHideDuration:6e3,onClose:m,anchorOrigin:{vertical:"top",horizontal:"right"},sx:{mt:2,mr:2},children:e.jsxs(L,{onClose:m,severity:"error",variant:"outlined",sx:{width:"100%",bgcolor:"rgba(255, 255, 255, 0.6)",backdropFilter:"blur(8px)"},children:[e.jsx(T,{children:"Error"}),j]})}),e.jsxs(i,{sx:{gap:1.5,display:"flex",flexDirection:"column",alignItems:"center",mb:5},children:[e.jsx(i,{component:"img",src:"http://erp.innoblitz.in/assets/Innoblitz%20Logo%20Full.png",alt:"Innoblitz Logo",sx:{width:180,maxHeight:180,objectFit:"contain",display:"block",mb:.5,mt:-4}}),e.jsx(p,{variant:"h5",sx:{mt:-3},children:"Sign in"}),e.jsxs(p,{variant:"body2",sx:{color:"text.secondary"},children:["Donâ€™t have an account?",e.jsx(x,{variant:"subtitle2",sx:{ml:.5},children:"Contact admin"})]})]}),v]})}function X(){return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`Sign in - ${z.appName}`}),e.jsx(O,{})]})}export{X as default};
